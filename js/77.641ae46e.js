"use strict";(self["webpackChunktoy_factory"]=self["webpackChunktoy_factory"]||[]).push([[77],{4226:function(t,e){e["Z"]={addToFavorite(t){const e=JSON.stringify(t);localStorage.setItem("favoriteList",e)},getFavorite(){return JSON.parse(localStorage.getItem("favoriteList"))}}},4077:function(t,e,i){i.r(e),i.d(e,{default:function(){return N}});var s=i(3396),a=i(7139),c=i(9242);const r={class:"container py-lg-5"},l={"aria-label":"breadcrumb"},o={class:"breadcrumb"},n={class:"breadcrumb-item"},d=(0,s._)("li",{class:"breadcrumb-item"},"產品列表",-1),u=(0,s.uE)('<div class="productlist text-center px-4 py-5"><div class="text-white text-center p-3 cover d-inline-block"><p class="mb-0">玩出激情，玩出收穫，玩轉世界。</p><h1 class="fw-bold my-3">產品列表</h1><p class="mb-0">這裡是快樂的起點~</p></div></div>',1),p={class:"row g-4 justify-content-around py-5"},g={class:"col-lg-2"},h={class:"text-center d-flex flex-column align-items-center"},v=["onClick"],f={class:"col-lg-9"},y={class:"row row-cols-lg-3 row-cols-sm-2 row-cols-1 g-4"},b={class:"card h-100 border cardHover"},m=["src","alt","title"],_={class:"card-body d-flex flex-column justify-content-between"},w={class:"d-flex justify-content-between align-items-center"},x={class:"card-title fw-bold text-primary mb-0"},k={class:"badge bg-warning rounded-pill text-black"},C=(0,s._)("hr",null,null,-1),$={class:"card-text"},L={class:"text-end"},z={key:0,class:"h5"},D={key:1,class:"h6"},S={key:2,class:"h5 text-danger"},F={class:"text-end position-relative",style:{"z-index":"3"}},I=["onClick"],P=(0,s._)("i",{class:"bi bi-suit-heart"},null,-1),j=[P],M=["disabled","onClick"],q=(0,s._)("i",{class:"bi bi-cart3"},null,-1),H=[q],Z=["onClick"];function O(t,e,i,P,q,O){const Y=(0,s.up)("LoadingEl"),E=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(Y,{active:q.isLoading},null,8,["active"]),(0,s._)("section",r,[(0,s._)("nav",l,[(0,s._)("ol",o,[(0,s._)("li",n,[(0,s.Wm)(E,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),d])]),u,(0,s._)("div",p,[(0,s._)("div",g,[(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(q.categoryList,(t=>((0,s.wg)(),(0,s.iD)("button",{type:"button",class:(0,a.C_)(["m-2 category py-2",{active:q.category===t.value}]),onClick:(0,c.iM)((e=>q.category=t.value),["prevent"]),key:t.value},(0,a.zw)(t.value),11,v)))),128))])]),(0,s._)("div",f,[(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(O.filterProducts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"col",key:e.id},[(0,s._)("div",b,[(0,s._)("img",{src:e.imageUrl,class:"card-img-top img-fluid",style:{"object-fit":"cover",height:"200px",cursor:"pointer"},alt:e.title,title:e.title},null,8,m),(0,s._)("div",_,[(0,s._)("div",null,[(0,s._)("div",w,[(0,s._)("h5",x,(0,a.zw)(e.title),1),(0,s._)("span",k,(0,a.zw)(e.category),1)]),C,(0,s._)("p",$,(0,a.zw)(e.description),1)]),(0,s._)("div",null,[(0,s._)("div",L,[e.price===e.origin_price?((0,s.wg)(),(0,s.iD)("p",z,(0,a.zw)(t.$filters.currency(e.origin_price))+" 元 ",1)):(0,s.kq)("",!0),e.price!==e.origin_price?((0,s.wg)(),(0,s.iD)("del",D," 原價 "+(0,a.zw)(t.$filters.currency(e.origin_price))+" 元 ",1)):(0,s.kq)("",!0),e.price!==e.origin_price?((0,s.wg)(),(0,s.iD)("p",S," 特價 "+(0,a.zw)(t.$filters.currency(e.price))+" 元 ",1)):(0,s.kq)("",!0)]),(0,s._)("div",F,[(0,s._)("button",{type:"button",class:(0,a.C_)(["btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white",{active:q.favorite.includes(e.id)}]),style:{width:"50px",height:"50px"},onClick:t=>O.toggleFavorite(e)},j,10,I),(0,s._)("button",{type:"button",class:"btn btn-primary btnCircle align-self-end rounded-circle fs-4 text-white",style:{width:"50px",height:"50px"},disabled:q.status.loadingItem===e.id,onClick:t=>O.addCart(e,e.id)},H,8,M)])]),(0,s._)("a",{href:"#",class:"stretched-link",onClick:(0,c.iM)((t=>O.getProduct(e.id)),["prevent"])},null,8,Z)])])])))),128))])])])])],64)}i(7658);var Y=i(4226),E={data(){return{products:[],isLoading:!1,categoryList:[{value:"全部"},{value:"玩偶"},{value:"模型"},{value:"益智"}],category:"全部",status:{loadingItem:""},favorite:Y.Z.getFavorite()||[]}},inject:["emitter"],methods:{getProducts(){const t="https://vue3-course-api.hexschool.io/api/pengyu-api/products/all";this.isLoading=!0,this.$http.get(t).then((t=>{t.data.success&&(this.products=t.data.products),this.isLoading=!1}))},getProduct(t){this.$router.push(`/products/${t}`)},addCart(t,e){const i="https://vue3-course-api.hexschool.io/api/pengyu-api/cart";this.isLoading=!0,this.status.loadingItem=e;const s={product_id:e,qty:1};this.$http.post(i,{data:s}).then((i=>{this.status.loadingItem="",this.emitter.emit("update-cart",e),this.isLoading=!1,this.$httpMessageState(i,`將"${t.title}"加入購物車`)}))},toggleFavorite(t){this.favorite.includes(t.id)?(this.favorite.splice(this.favorite.indexOf(t.id),1),this.$httpMessageState({data:{success:!0}},`將"${t.title}"移除我的最愛`)):(this.favorite.push(t.id),this.$httpMessageState({data:{success:!0}},`將"${t.title}"加入我的最愛`)),Y.Z.addToFavorite(this.favorite),this.emitter.emit("update-favorite",this.favorite)}},computed:{filterProducts(){return this.products.filter((t=>"全部"===this.category?this.products:t.category.match(this.category)))}},created(){this.getProducts()}},J=i(89);const K=(0,J.Z)(E,[["render",O]]);var N=K}}]);
//# sourceMappingURL=77.641ae46e.js.map