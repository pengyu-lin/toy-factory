"use strict";(self["webpackChunktoy_factory"]=self["webpackChunktoy_factory"]||[]).push([[680],{4680:function(e,l,a){a.r(l),a.d(l,{default:function(){return Z}});var t=a(3396),s=a(7139),o=a(9242);const i={class:"container py-5"},r=(0,t.uE)('<div class="row d-flex justify-content-center"><div class="col col-lg-8 d-flex align-items-center justify-content-around text-nowrap"><div class="border d-inline-block text-center p-4 bg-dark text-white" style="width:150px;height:150px;"><i class="bi bi-list-check fs-4"></i><p class="mt-2">填寫資料</p><p class="mb-0">STEP 1</p></div><i class="bi bi-arrow-right fs-1 d-none d-sm-block"></i><div class="border d-inline-block text-center p-4" style="width:150px;height:150px;"><i class="bi bi-credit-card fs-4"></i><p class="mt-2">確認付款</p><p class="mb-0">STEP 2</p></div><i class="bi bi-arrow-right fs-1 d-none d-sm-block"></i><div class="border d-inline-block text-center p-4" style="width:150px;height:150px;"><i class="bi bi-clipboard-check fs-4"></i><p class="mt-2">送出訂單</p><p class="mb-0">STEP 3</p></div></div></div>',1),c={class:"my-5 row flex-row-reverse justify-content-around"},n={class:"col-md-4"},d={class:"border p-3"},u={class:"table align-middle justify-content-around"},p=(0,t._)("thead",null,[(0,t._)("tr",null,[(0,t._)("th",null,"產品名稱"),(0,t._)("th",null,"數量"),(0,t._)("th",null,"價格")])],-1),m={style:{width:"100px"}},f={class:"input-group input-group-sm"},b={class:"p-3"},_={class:"d-flex justify-content-between"},h=(0,t._)("p",null,"商品共計:",-1),y={class:"input-group mb-3"},v={key:0,class:"d-flex justify-content-between"},g=(0,t._)("p",null,"合計:",-1),w={key:1,class:"text-success"},x={key:2,class:"d-flex justify-content-between text-success"},k=(0,t._)("p",null,"折扣價：",-1),C={class:"mb-3"},V=(0,t._)("label",{for:"email",class:"form-label"},"Email*",-1),W={class:"mb-3"},E=(0,t._)("label",{for:"name",class:"form-label"},"收件人姓名*",-1),$={class:"mb-3"},q=(0,t._)("label",{for:"tel",class:"form-label"},"收件人電話*",-1),P={class:"mb-3"},j=(0,t._)("label",{for:"address",class:"form-label"},"收件人地址*",-1),z={class:"mb-3"},D=(0,t._)("label",{for:"pay",class:"form-label"},"付款方式*",-1),S=(0,t._)("option",{disabled:"",selected:""},"選擇付款方式",-1),U=(0,t._)("option",{value:"ATM"},"ATM",-1),L=(0,t._)("option",{value:"GooglePay"},"信用卡",-1),M=(0,t._)("option",{value:"ApplePay"},"ApplePay",-1),T=(0,t._)("option",{value:"GooglePay"},"GooglePay",-1),A=[S,U,L,M,T],G={class:"mb-3"},F=(0,t._)("label",{for:"message",class:"form-label"},"留言",-1),H={class:"text-end"};function I(e,l,a,S,U,L){const M=(0,t.up)("LoadingEl"),T=(0,t.up)("FieldEl"),I=(0,t.up)("ErrorMessage"),O=(0,t.up)("FormEl");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t.Wm)(M,{active:e.isLoading},null,8,["active"]),(0,t._)("div",i,[r,(0,t._)("div",c,[(0,t._)("div",n,[(0,t._)("div",d,[(0,t._)("table",u,[p,(0,t._)("tbody",null,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(U.cart.carts,(l=>((0,t.wg)(),(0,t.iD)("tr",{key:l.id},[(0,t._)("td",null,(0,s.zw)(l.product.title),1),(0,t._)("td",m,[(0,t._)("div",f,(0,s.zw)(l.qty)+" / "+(0,s.zw)(l.product.unit),1)]),(0,t._)("td",null,(0,s.zw)(e.$filters.currency(l.final_total)),1)])))),128))])]),(0,t._)("div",b,[(0,t._)("div",_,[h,(0,t._)("p",null,(0,s.zw)(e.$filters.currency(U.cart.total)),1)]),(0,t._)("div",y,[(0,t.wy)((0,t._)("input",{type:"text",class:"form-control lh-lg","onUpdate:modelValue":l[0]||(l[0]=e=>U.coupon_code=e),placeholder:"輸入優惠碼"},null,512),[[o.nr,U.coupon_code]]),(0,t._)("button",{type:"button",class:"btn btn-dark",onClick:l[1]||(l[1]=(...e)=>L.addCouponCode&&L.addCouponCode(...e))}," 套用 ")]),U.cart.final_total===U.cart.total?((0,t.wg)(),(0,t.iD)("div",v,[g,(0,t._)("p",null,(0,s.zw)(e.$filters.currency(U.cart.final_total)),1)])):(0,t.kq)("",!0),U.cart.final_total!==U.cart.total?((0,t.wg)(),(0,t.iD)("p",w," 已套用優惠券 ")):(0,t.kq)("",!0),U.cart.final_total!==U.cart.total?((0,t.wg)(),(0,t.iD)("div",x,[k,(0,t._)("p",null,(0,s.zw)(e.$filters.currency(U.cart.final_total)),1)])):(0,t.kq)("",!0)])])]),(0,t.Wm)(O,{class:"col-md-6 border p-3",onSubmit:L.createOrder},{default:(0,t.w5)((({errors:e})=>[(0,t._)("div",C,[V,(0,t.Wm)(T,{id:"email",name:"email",type:"email",class:(0,s.C_)(["form-control",{"is-invalid":e["email"]}]),placeholder:"請輸入 Email",rules:"email|required",modelValue:U.form.user.email,"onUpdate:modelValue":l[2]||(l[2]=e=>U.form.user.email=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"email",class:"invalid-feedback"})]),(0,t._)("div",W,[E,(0,t.Wm)(T,{id:"name",name:"姓名",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入姓名",rules:"required",modelValue:U.form.user.name,"onUpdate:modelValue":l[3]||(l[3]=e=>U.form.user.name=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"姓名",class:"invalid-feedback"})]),(0,t._)("div",$,[q,(0,t.Wm)(T,{id:"tel",name:"電話",type:"tel",class:(0,s.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入電話",rules:"required",modelValue:U.form.user.tel,"onUpdate:modelValue":l[4]||(l[4]=e=>U.form.user.tel=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"電話",class:"invalid-feedback"})]),(0,t._)("div",P,[j,(0,t.Wm)(T,{id:"address",name:"地址",type:"text",class:(0,s.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入地址",rules:"required",modelValue:U.form.user.address,"onUpdate:modelValue":l[5]||(l[5]=e=>U.form.user.address=e)},null,8,["class","modelValue"]),(0,t.Wm)(I,{name:"地址",class:"invalid-feedback"})]),(0,t._)("div",z,[D,(0,t.wy)((0,t._)("select",{id:"pay",class:"form-select","aria-label":"Default select example","onUpdate:modelValue":l[6]||(l[6]=e=>U.payment=e)},A,512),[[o.bM,U.payment]]),(0,t.Wm)(I,{name:"地址",class:"invalid-feedback"})]),(0,t._)("div",G,[F,(0,t.wy)((0,t._)("textarea",{name:"",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":l[7]||(l[7]=e=>U.form.message=e)},null,512),[[o.nr,U.form.message]])]),(0,t._)("div",H,[(0,t._)("button",{type:"submit",class:(0,s.C_)(["btn btnStyle",{disabled:"選擇付款方式"===U.payment}])}," 送出訂單 ",2)])])),_:1},8,["onSubmit"])])])],64)}a(7658);var O={data(){return{form:{user:{name:"",email:"",tel:"",address:""},message:""},payment:"選擇付款方式",cart:{},coupon_code:"",status:{loadingItem:""}}},methods:{createOrder(){const e="https://vue3-course-api.hexschool.io/api/pengyu-api/order",l=this.form;this.$http.post(e,{data:l}).then((e=>{const l=e.data.orderId;this.$router.push(`/checkout/${l}`)}))},getCart(){const e="https://vue3-course-api.hexschool.io/api/pengyu-api/cart";this.isLoading=!0,this.$http.get(e).then((e=>{this.cart=e.data.data,this.isLoading=!1}))},addCouponCode(){const e="https://vue3-course-api.hexschool.io/api/pengyu-api/coupon",l={code:this.coupon_code};this.isLoading=!0,this.$http.post(e,{data:l}).then((e=>{this.$httpMessageState(e,"加入優惠券"),this.getCart()}))}},created(){this.getCart()}},Y=a(89);const K=(0,Y.Z)(O,[["render",I]]);var Z=K}}]);
//# sourceMappingURL=680.50c280c2.js.map