{"version":3,"file":"js/77.641ae46e.js","mappings":"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","sources":["webpack://toy-factory/./src/methods/favorite.js","webpack://toy-factory/./src/views/ProductList.vue","webpack://toy-factory/./src/views/ProductList.vue?f54f"],"sourcesContent":["export default {\r\n  addToFavorite (favorite) {\r\n    const favoriteStr = JSON.stringify(favorite)\r\n    localStorage.setItem('favoriteList', favoriteStr)\r\n  },\r\n  getFavorite () {\r\n    return JSON.parse(localStorage.getItem('favoriteList'))\r\n  }\r\n}\r\n","<template>\r\n  <LoadingEl :active=\"isLoading\" />\r\n  <section class=\"container py-lg-5\">\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\"><router-link to=\"/\">首頁</router-link></li>\r\n        <li class=\"breadcrumb-item\">產品列表</li>\r\n      </ol>\r\n    </nav>\r\n    <div class=\"productlist text-center px-4 py-5\">\r\n      <div class=\"text-white text-center p-3 cover d-inline-block\">\r\n        <p class=\"mb-0\">玩出激情，玩出收穫，玩轉世界。</p>\r\n        <h1 class=\"fw-bold my-3\">產品列表</h1>\r\n        <p class=\"mb-0\">這裡是快樂的起點~</p>\r\n      </div>\r\n    </div>\r\n    <div class=\"row g-4 justify-content-around py-5\">\r\n      <div class=\"col-lg-2\">\r\n        <div class=\"text-center d-flex flex-column align-items-center\">\r\n          <button\r\n            type=\"button\"\r\n            class=\"m-2 category py-2\"\r\n            :class=\"{ active: category === item.value }\"\r\n            @click.prevent=\"category = item.value\"\r\n            v-for=\"item in categoryList\"\r\n            :key=\"item.value\"\r\n          >\r\n            {{ item.value }}\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-lg-9\">\r\n        <div class=\"row row-cols-lg-3 row-cols-sm-2 row-cols-1 g-4\">\r\n          <div class=\"col\" v-for=\"item in filterProducts\" :key=\"item.id\">\r\n            <div class=\"card h-100 border cardHover\">\r\n              <img\r\n                :src=\"item.imageUrl\"\r\n                class=\"card-img-top img-fluid\"\r\n                style=\"object-fit: cover; height: 200px; cursor: pointer\"\r\n                :alt=\"item.title\"\r\n                :title=\"item.title\"\r\n              />\r\n              <div class=\"card-body d-flex flex-column justify-content-between\">\r\n                <div>\r\n                  <div class=\"d-flex justify-content-between align-items-center\">\r\n                    <h5 class=\"card-title fw-bold text-primary mb-0\">\r\n                      {{ item.title }}\r\n                    </h5>\r\n                    <span class=\"badge bg-warning rounded-pill text-black\">\r\n                      {{ item.category }}\r\n                    </span>\r\n                  </div>\r\n                  <hr />\r\n                  <p class=\"card-text\">{{ item.description }}</p>\r\n                </div>\r\n                <div>\r\n                  <div class=\"text-end\">\r\n                    <p class=\"h5\" v-if=\"item.price === item.origin_price\">\r\n                      {{ $filters.currency(item.origin_price) }} 元\r\n                    </p>\r\n                    <del class=\"h6\" v-if=\"item.price !== item.origin_price\">\r\n                      原價 {{ $filters.currency(item.origin_price) }} 元\r\n                    </del>\r\n                    <p class=\"h5 text-danger\" v-if=\"item.price !== item.origin_price\">\r\n                      特價 {{ $filters.currency(item.price) }} 元\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"text-end position-relative\" style=\"z-index:3;\">\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white\"\r\n                      :class=\"{ active: favorite.includes(item.id) }\"\r\n                      style=\"width: 50px; height: 50px\"\r\n                      @click=\"toggleFavorite(item)\"\r\n                    >\r\n                      <i class=\"bi bi-suit-heart\"/>\r\n                    </button>\r\n                    <button\r\n                      type=\"button\"\r\n                      class=\"btn btn-primary btnCircle align-self-end rounded-circle fs-4 text-white\"\r\n                      style=\"width: 50px; height: 50px\"\r\n                      :disabled=\"status.loadingItem === item.id\"\r\n                      @click=\"addCart(item, item.id)\"\r\n                    >\r\n                      <i class=\"bi bi-cart3\"/>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n                <a href=\"#\" class=\"stretched-link\" @click.prevent=\"getProduct(item.id)\"></a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport favorite from '@/methods/favorite'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      products: [],\r\n      isLoading: false,\r\n      categoryList: [\r\n        { value: '全部' },\r\n        { value: '玩偶' },\r\n        { value: '模型' },\r\n        { value: '益智' }\r\n      ],\r\n      category: '全部',\r\n      status: {\r\n        loadingItem: ''\r\n      },\r\n      favorite: favorite.getFavorite() || []\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getProducts () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.products = res.data.products\r\n        }\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/products/${id}`)\r\n    },\r\n    addCart (item, id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = ''\r\n        this.emitter.emit('update-cart', id)\r\n        this.isLoading = false\r\n        this.$httpMessageState(res, `將\"${item.title}\"加入購物車`)\r\n      })\r\n    },\r\n    toggleFavorite (item) {\r\n      if (this.favorite.includes(item.id)) {\r\n        this.favorite.splice(this.favorite.indexOf(item.id), 1)\r\n        this.$httpMessageState(\r\n          {\r\n            data: {\r\n              success: true\r\n            }\r\n          },\r\n          `將\"${item.title}\"移除我的最愛`\r\n        )\r\n      } else {\r\n        this.favorite.push(item.id)\r\n        this.$httpMessageState(\r\n          {\r\n            data: {\r\n              success: true\r\n            }\r\n          },\r\n          `將\"${item.title}\"加入我的最愛`\r\n        )\r\n      }\r\n      favorite.addToFavorite(this.favorite)\r\n      this.emitter.emit('update-favorite', this.favorite)\r\n    }\r\n  },\r\n  computed: {\r\n    filterProducts () {\r\n      return this.products.filter((item) => {\r\n        if (this.category === '全部') {\r\n          return this.products\r\n        }\r\n        return item.category.match(this.category)\r\n      })\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./ProductList.vue?vue&type=template&id=135d4c10\"\nimport script from \"./ProductList.vue?vue&type=script&lang=js\"\nexport * from \"./ProductList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\HZ\\\\Desktop\\\\front-end\\\\toy-factory\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["addToFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","class","_createElementVNode","style","_hoisted_27","_hoisted_30","_createVNode","_component_LoadingEl","active","$data","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_router_link","to","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_createElementBlock","_Fragment","item","type","value","onClick","key","_hoisted_11","_hoisted_12","$options","id","_hoisted_13","src","imageUrl","alt","title","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","category","_hoisted_19","_hoisted_20","description","_hoisted_21","price","origin_price","_hoisted_22","_ctx","currency","_hoisted_23","_hoisted_24","_hoisted_25","includes","disabled","loadingItem","href","data","products","isLoading","categoryList","status","inject","methods","getProducts","api","this","$http","get","then","res","success","getProduct","$router","push","addCart","url","cart","product_id","qty","post","emitter","emit","$httpMessageState","toggleFavorite","splice","indexOf","computed","filterProducts","filter","match","created","__exports__","render"],"sourceRoot":""}