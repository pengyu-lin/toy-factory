"use strict";(self["webpackChunktoy_factory"]=self["webpackChunktoy_factory"]||[]).push([[987],{1987:function(t,e,a){a.r(e),a.d(e,{default:function(){return Z}});a(7658);var s=a(3396),l=a(7139),i=a(9242);const o={class:"container py-lg-5"},n={"aria-label":"breadcrumb"},c={class:"breadcrumb"},r={class:"breadcrumb-item"},u=(0,s._)("li",{class:"breadcrumb-item"},"購物車",-1),d=(0,s._)("h2",null,[(0,s._)("i",{class:"bi bi-cart3 fs-3"}),(0,s.Uk)(" 購物車")],-1),p=(0,s._)("hr",null,null,-1),h=(0,s._)("i",{class:"bi bi-cart4",style:{"font-size":"150px"}},null,-1),b=(0,s._)("p",{class:"fs-2"},"購物車是空的，來去逛逛吧!",-1),_={class:"row"},y={class:"col-lg-8"},m=["src","alt","onClick"],g={class:"h6 my-3 my-md-0",style:{width:"30%"}},f={class:"input-group",style:{width:"150px"}},C=["onClick","disabled"],k=(0,s._)("i",{class:"bi bi-dash"},null,-1),w=[k],v=["onUpdate:modelValue"],x=["onClick"],$=(0,s._)("i",{class:"bi bi-plus"},null,-1),q=[$],L={class:"my-3 my-md-0",style:{width:"20%"}},I=["onClick"],z=(0,s._)("i",{class:"bi bi-trash"},null,-1),D=[z],U={class:"border border-primary p-3"},j={class:"d-flex justify-content-between"},S=(0,s._)("p",null,"商品共計:",-1),V={class:"input-group mb-3"},H={key:0,class:"d-flex justify-content-between"},M=(0,s._)("p",null,"合計:",-1),P={key:1,class:"text-success"},W={key:2,class:"d-flex justify-content-between text-success"},Y=(0,s._)("p",null,"折扣價：",-1);function E(t,e,a,k,$,z){const E=(0,s.up)("LoadingEl"),K=(0,s.up)("router-link");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(E,{active:$.isLoading},null,8,["active"]),(0,s._)("div",o,[(0,s._)("nav",n,[(0,s._)("ol",c,[(0,s._)("li",r,[(0,s.Wm)(K,{to:"/"},{default:(0,s.w5)((()=>[(0,s.Uk)("首頁")])),_:1})]),u])]),d,p,(0,s._)("div",{class:(0,l.C_)(["text-center pb-5",{"d-none":0!==$.cart.total}])},[h,b,(0,s._)("button",{type:"button",class:"btnStyle",onClick:e[0]||(e[0]=e=>t.$router.push("/products"))}," 選玩具 ")],2),(0,s._)("div",_,[(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)($.cart.carts,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"border border-primary d-flex flex-column flex-md-row align-items-center p-3 mb-3 text-center",key:e.id},[(0,s._)("img",{src:e.product.imageUrl,class:"productImg",alt:e.product.title,onClick:t=>z.getProduct(e.product.id),style:{cursor:"pointer"}},null,8,m),(0,s._)("p",g,(0,l.zw)(e.product.title),1),(0,s._)("div",f,[(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t=>z.updateCart(e,e.qty-1),disabled:1==e.qty},w,8,C),(0,s.wy)((0,s._)("input",{type:"text",min:"1","onUpdate:modelValue":t=>e.qty=t,class:"form-control form-control-sm text-center border-dark",readonly:""},null,8,v),[[i.nr,e.qty,void 0,{number:!0}]]),(0,s._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t=>z.updateCart(e,e.qty+1)},q,8,x)]),(0,s._)("p",L," NT"+(0,l.zw)(t.$filters.currency(e.final_total)),1),(0,s._)("button",{type:"button",class:"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white",onClick:t=>z.removeCartItem(e,e.id)},D,8,I)])))),128))]),(0,s._)("div",{class:(0,l.C_)(["col-lg-4 pb-5",{"d-none":0===$.cart.total}])},[(0,s._)("div",U,[(0,s._)("div",j,[S,(0,s._)("p",null,(0,l.zw)(t.$filters.currency($.cart.total)),1)]),(0,s._)("div",V,[(0,s.wy)((0,s._)("input",{type:"text",class:"form-control lh-lg border-dark","onUpdate:modelValue":e[1]||(e[1]=t=>$.coupon_code=t),placeholder:"輸入優惠碼"},null,512),[[i.nr,$.coupon_code]]),(0,s._)("button",{type:"button",class:"btn btn-dark",onClick:e[2]||(e[2]=(...t)=>z.addCouponCode&&z.addCouponCode(...t))}," 套用 ")]),$.cart.final_total===$.cart.total?((0,s.wg)(),(0,s.iD)("div",H,[M,(0,s._)("p",null,(0,l.zw)(t.$filters.currency($.cart.final_total)),1)])):(0,s.kq)("",!0),$.cart.final_total!==$.cart.total?((0,s.wg)(),(0,s.iD)("p",P," 已套用優惠券 ")):(0,s.kq)("",!0),$.cart.final_total!==$.cart.total?((0,s.wg)(),(0,s.iD)("div",W,[Y,(0,s._)("p",null,(0,l.zw)(t.$filters.currency($.cart.final_total)),1)])):(0,s.kq)("",!0),(0,s._)("button",{type:"button",class:(0,l.C_)(["btn btnStyle w-100",{disabled:0===$.cart.total}]),onClick:e[3]||(e[3]=t=>this.$router.push("/checkout"))}," 結帳去 ",2)])],2)])])],64)}var K={data(){return{cart:{},coupon_code:"",status:{loadingItem:""},isLoading:!1}},inject:["emitter"],methods:{getCart(){const t="https://vue3-course-api.hexschool.io/api/pengyu-api/cart";this.isLoading=!0,this.$http.get(t).then((t=>{this.cart=t.data.data,this.isLoading=!1}))},updateCart(t,e=1){const a=`https://vue3-course-api.hexschool.io/api/pengyu-api/cart/${t.id}`;this.isLoading=!0,this.status.loadingItem=t.id;const s={product_id:t.product_id,qty:e};this.$http.put(a,{data:s}).then((t=>{this.status.loadingItem="",this.getCart()}))},removeCartItem(t,e){this.status.loadingItem=e;const a=`https://vue3-course-api.hexschool.io/api/pengyu-api/cart/${e}`;this.isLoading=!0,this.$http.delete(a).then((a=>{this.$httpMessageState(a,`將"${t.product.title}"移除購物車`),this.status.loadingItem="",this.getCart(),this.emitter.emit("update-cart",e)}))},addCouponCode(){const t="https://vue3-course-api.hexschool.io/api/pengyu-api/coupon",e={code:this.coupon_code};this.isLoading=!0,this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCart(),this.isLoading=!1}))},getProduct(t){this.$router.push(`/products/${t}`)}},created(){this.getCart()}},N=a(89);const T=(0,N.Z)(K,[["render",E]]);var Z=T}}]);
//# sourceMappingURL=987.acf9d1ec.js.map