{"version":3,"file":"js/992.0bb05d35.js","mappings":"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","sources":["webpack://toy-factory/./src/methods/favorite.js","webpack://toy-factory/./src/views/FavoritePage.vue","webpack://toy-factory/./src/views/FavoritePage.vue?9edb"],"sourcesContent":["export default {\r\n  addToFavorite (favorite) {\r\n    const favoriteStr = JSON.stringify(favorite)\r\n    localStorage.setItem('favoriteList', favoriteStr)\r\n  },\r\n  getFavorite () {\r\n    return JSON.parse(localStorage.getItem('favoriteList'))\r\n  }\r\n}\r\n","<template>\r\n  <LoadingEl :active=\"isLoading\" />\r\n  <div class=\"container py-lg-5\">\r\n    <nav aria-label=\"breadcrumb\">\r\n      <ol class=\"breadcrumb\">\r\n        <li class=\"breadcrumb-item\"><router-link to=\"/\">首頁</router-link></li>\r\n        <li class=\"breadcrumb-item\">我的最愛</li>\r\n      </ol>\r\n    </nav>\r\n    <h2><i class=\"bi bi-suit-heart-fill fs-3 text-danger\"/> 我的最愛</h2>\r\n    <hr />\r\n    <div class=\"row\">\r\n      <div class=\"col-lg-8\">\r\n        <div\r\n          class=\"text-center pb-5\"\r\n          :class=\"{ 'd-none': favortieProducts.length !== 0 }\"\r\n        >\r\n          <i\r\n            class=\"bi bi-suit-heart-fill text-danger\"\r\n            style=\"font-size: 150px\"\r\n          />\r\n          <p class=\"fs-2\">來去把喜歡的玩具加入最愛吧~!</p>\r\n          <button\r\n            type=\"button\"\r\n            class=\"btn btnStyle\"\r\n            @click=\"$router.push('/products')\"\r\n          >\r\n            選玩具\r\n          </button>\r\n        </div>\r\n        <div\r\n          class=\"border border-primary d-flex flex-column flex-md-row justify-content-around align-items-center p-3 mb-3 text-center\"\r\n          v-for=\"item in favortieProducts\"\r\n          :key=\"item.id\"\r\n        >\r\n          <img\r\n            :src=\"item.imageUrl\"\r\n            class=\"productImg img-fluid\"\r\n            :alt=\"item.title\"\r\n            @click=\"getProduct(item.id)\"\r\n            style=\"cursor:pointer;\"\r\n          />\r\n          <p class=\"h5 pt-ms-0 pt-3\">{{ item.title }}</p>\r\n          <div class=\"d-flex flex-column\">\r\n            <p class=\"h5 mb-md-0\" v-if=\"item.price === item.origin_price\">\r\n              {{ $filters.currency(item.origin_price) }} 元\r\n            </p>\r\n            <del class=\"h6\" v-if=\"item.price !== item.origin_price\"\r\n              >原價 {{ $filters.currency(item.origin_price) }} 元</del\r\n            >\r\n            <p class=\"h5 text-danger\" v-if=\"item.price !== item.origin_price\">\r\n              特價 {{ $filters.currency(item.price) }} 元\r\n            </p>\r\n          </div>\r\n          <div class=\"d-flex\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white\"\r\n              @click=\"addCart(item, item.id)\"\r\n            >\r\n              <i class=\"bi bi-cart-plus\"/>\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              class=\"btn btn-primary btnCircle mx-2 rounded-circle fs-4 text-white\"\r\n              @click=\"removeFavortie(item, item.id)\"\r\n            >\r\n              <i class=\"bi bi-trash\"/>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-md-4\">\r\n        <img\r\n          src=\"@/assets/images/guandam.jpg\"\r\n          alt=\"我的最愛\"\r\n          class=\"img-fluid d-none d-lg-block\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport favorite from '@/methods/favorite'\r\n\r\nexport default {\r\n  data () {\r\n    return {\r\n      favortieProducts: [],\r\n      favorite: favorite.getFavorite() || [],\r\n      isLoading: false,\r\n      status: {\r\n        loadingItem: ''\r\n      }\r\n    }\r\n  },\r\n  inject: ['emitter'],\r\n  methods: {\r\n    getFavorite () {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\r\n      this.isLoading = true\r\n      this.$http.get(api).then((res) => {\r\n        if (res.data.success) {\r\n          this.favortieProducts = res.data.products.filter((item) =>\r\n            this.favorite.includes(item.id)\r\n          )\r\n        }\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    addCart (item, id) {\r\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\r\n      this.isLoading = true\r\n      this.status.loadingItem = id\r\n      const cart = {\r\n        product_id: id,\r\n        qty: 1\r\n      }\r\n      this.$http.post(url, { data: cart }).then((res) => {\r\n        this.status.loadingItem = ''\r\n        this.emitter.emit('update-cart', id)\r\n        this.isLoading = false\r\n        this.$httpMessageState(res, `將\"${item.title}\"加入購物車`)\r\n      })\r\n      // this.favorite.splice(this.favorite.indexOf(id), 1)\r\n      // favorite.addToFavorite(this.favorite)\r\n      // this.emitter.emit('update-favorite', this.favorite)\r\n      // this.getFavorite()\r\n    },\r\n    getProduct (id) {\r\n      this.$router.push(`/products/${id}`)\r\n    },\r\n    removeFavortie (item, id) {\r\n      this.isLoading = true\r\n      this.favorite.splice(this.favorite.indexOf(id), 1)\r\n      favorite.addToFavorite(this.favorite)\r\n      this.emitter.emit('update-favorite', this.favorite)\r\n      this.$httpMessageState(\r\n        {\r\n          data: {\r\n            success: true\r\n          }\r\n        },\r\n        `將\"${item.title}\"移除我的最愛`\r\n      )\r\n      this.getFavorite()\r\n    }\r\n  },\r\n  created () {\r\n    this.getFavorite()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./FavoritePage.vue?vue&type=template&id=eaca1144\"\nimport script from \"./FavoritePage.vue?vue&type=script&lang=js\"\nexport * from \"./FavoritePage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\HZ\\\\Desktop\\\\front-end\\\\toy-factory\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["addToFavorite","favorite","favoriteStr","JSON","stringify","localStorage","setItem","getFavorite","parse","getItem","class","_createElementVNode","style","_hoisted_20","_hoisted_23","src","_imports_0","alt","_createVNode","_component_LoadingEl","active","$data","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_component_router_link","to","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","length","_hoisted_10","_hoisted_11","type","onClick","_ctx","push","_createElementBlock","_Fragment","item","key","id","imageUrl","title","$options","_hoisted_13","_hoisted_14","price","origin_price","_hoisted_15","currency","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_25","data","favortieProducts","isLoading","status","loadingItem","inject","methods","api","this","$http","get","then","res","success","products","filter","includes","addCart","url","cart","product_id","qty","post","emitter","emit","$httpMessageState","getProduct","$router","removeFavortie","splice","indexOf","created","__exports__","render"],"sourceRoot":""}